<!-- Modern Flash Messages -->
<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
    {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
    {% for category, message in messages %}
    {% set icon = {
        'success': 'check-circle',
        'danger': 'exclamation-circle',
        'warning': 'exclamation-triangle',
        'info': 'info-circle'
    }.get(category, 'bell') %}
    <div class="toast show rounded-lg shadow-lg" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header border-0 py-2">
            <i class="bi bi-{{ icon }} me-2 text-{{ category }}"></i>
            <strong class="me-auto text-{{ category }}">
                {{ {'success': 'Success', 'danger': 'Error', 'warning': 'Warning', 'info': 'Info'}.get(category, 'Notice') }}
            </strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body border-top py-3">
            {{ message }}
        </div>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toastElList = [].slice.call(document.querySelectorAll('.toast'));
        toastElList.map(function (toastEl) {
            const toast = new bootstrap.Toast(toastEl, {
                delay: 4000,
                autohide: true,
                animation: true
            });
            toast.show();
        });
    });
</script>